# 2020Es3r1

The goal of this release was to improve the general stability of the application, as well as implementing features requested by the customer.

## Completed Issues

In the following, a list of the issues completed in the different repositories is shown.

### weekplanner



|Number |Title |Solved by PR |
|:---------|:---------|:---------|
|[703](https://github.com/aau-giraf/weekplanner/issues/703) |Timer does not get removed when a timer is running | |
|[695](https://github.com/aau-giraf/weekplanner/issues/695) |Buggy "fortryd" "aflys" and "done" buttons | |
|[683](https://github.com/aau-giraf/weekplanner/issues/683) |The function checkServerConnection always throws an error |[686](https://github.com/aau-giraf/weekplanner/issues/686)   |
|[681](https://github.com/aau-giraf/weekplanner/issues/681) |As a user I would like the stop button on a timer to be a restart button instead |  |
|[670](https://github.com/aau-giraf/weekplanner/issues/670) |App rejects login credentials before accepting them |  |
|[669](https://github.com/aau-giraf/weekplanner/issues/669) |Periodical bug when deleting week plans |  |
|[668](https://github.com/aau-giraf/weekplanner/issues/668) |Inconsistency in settings menu for citizens |[682](https://github.com/aau-giraf/weekplanner/issues/682)   |
|[660](https://github.com/aau-giraf/weekplanner/issues/660) |Unit test bugs |[661](https://github.com/aau-giraf/weekplanner/issues/661)   |
|[641](https://github.com/aau-giraf/weekplanner/issues/641) |Changing "Tegn for udførelse" does actually change the sign, it is always a check-mark |  |
|[622](https://github.com/aau-giraf/weekplanner/issues/622) |Searching pictograms should not be case sensitive |  |
|[619](https://github.com/aau-giraf/weekplanner/issues/619) |Error handling for timer_bloc API |  |
|[618](https://github.com/aau-giraf/weekplanner/issues/618) |Error handling for pictogram_image_bloc API |  |
|[617](https://github.com/aau-giraf/weekplanner/issues/617) |Error handling for new_citizen_bloc API |  |
|[616](https://github.com/aau-giraf/weekplanner/issues/616) |As a guardian I would like to be able to unmark completed activities |  |
|[615](https://github.com/aau-giraf/weekplanner/issues/615) |As a citizen I would like to be able to reenter a completed activity |[651](https://github.com/aau-giraf/weekplanner/issues/651)   |
|[614](https://github.com/aau-giraf/weekplanner/issues/614) |Error handling for copy_weekplan_bloc API |  |
|[613](https://github.com/aau-giraf/weekplanner/issues/613) |Error handling for weekplan_bloc API |  |
|[612](https://github.com/aau-giraf/weekplanner/issues/612) |Error handling for activity_bloc API | |
|[610](https://github.com/aau-giraf/weekplanner/issues/610) |Error handling for weekplan_selector_bloc API | |
|[608](https://github.com/aau-giraf/weekplanner/issues/608) |Error handling for auth_bloc API | |
|[607](https://github.com/aau-giraf/weekplanner/issues/607) |Error handling for upload_from_gallery_bloc API | |
|[605](https://github.com/aau-giraf/weekplanner/issues/605) |Error handling for settings_bloc API | |
|[604](https://github.com/aau-giraf/weekplanner/issues/604) |Error handling for pictogram_bloc API | |
|[603](https://github.com/aau-giraf/weekplanner/issues/603) |As a guadian I would like for the app to prompt me for access to the Gallery | |
|[600](https://github.com/aau-giraf/weekplanner/issues/600) |As a guardian I would like to be able to log out from the "show activity" screen | |
|[597](https://github.com/aau-giraf/weekplanner/issues/597) |Error handling for choose_citizen_bloc API | |
|[595](https://github.com/aau-giraf/weekplanner/issues/595) |Text overflow in "Vælg billede fra galleri" screen |[655](https://github.com/aau-giraf/weekplanner/issues/655)   |
|[592](https://github.com/aau-giraf/weekplanner/issues/592) |"Overståede Uger" includes current week |[663](https://github.com/aau-giraf/weekplanner/issues/663)| 
|[591](https://github.com/aau-giraf/weekplanner/issues/591) |As a developer i would like for the settings to not be saved in the database | |
|[589](https://github.com/aau-giraf/weekplanner/issues/589) |When copying activities to another day, leaving and reentering the weekplan messes up the order | |
|[588](https://github.com/aau-giraf/weekplanner/issues/588) |Activity movement is not saved when leaving and reentering the weekplan | |
|[587](https://github.com/aau-giraf/weekplanner/issues/587) |Moving activities in a weekplan should not cause the whole weekplan to reload |[694](https://github.com/aau-giraf/weekplanner/issues/694)   |
|[586](https://github.com/aau-giraf/weekplanner/issues/586) |Changing the weekplan colors does not work in guardian view | |
|[583](https://github.com/aau-giraf/weekplanner/issues/583) |When deleting the left-most option in a choiceboard the wrong picture is shown |[650](https://github.com/aau-giraf/weekplanner/issues/650)   |
|[580](https://github.com/aau-giraf/weekplanner/issues/580) |Newly created citizen does not show up right away in the list of citizens |[590](https://github.com/aau-giraf/weekplanner/issues/590)   |
|[579](https://github.com/aau-giraf/weekplanner/issues/579) |As a user I would like for the UI colors to be consistent | |
|[576](https://github.com/aau-giraf/weekplanner/issues/576) |As a Guardian i would like to be able to rename choiceboards. |[620](https://github.com/aau-giraf/weekplanner/issues/620)   |
|[573](https://github.com/aau-giraf/weekplanner/issues/573) |Expand _username validation to prevent special symbols |[575](https://github.com/aau-giraf/weekplanner/issues/575)   |
|[570](https://github.com/aau-giraf/weekplanner/issues/570) |Write custom danish error messages based on the error code |[574](https://github.com/aau-giraf/weekplanner/issues/574)   |
|[568](https://github.com/aau-giraf/weekplanner/issues/568) |Wrong error message | |
|[563](https://github.com/aau-giraf/weekplanner/issues/563) |The plus on "Tilføj choiceboard" scales down and becomes difficult to find when not using tablets. |[596](https://github.com/aau-giraf/weekplanner/issues/596)   |
|[562](https://github.com/aau-giraf/weekplanner/issues/562) |Unit test bugs |[564](https://github.com/aau-giraf/weekplanner/issues/564)   |
|[547](https://github.com/aau-giraf/weekplanner/issues/547) |Overwrite dialog when copying week plan is not displayed if the week plan is named based on the year and week for the week plan | |
|[542](https://github.com/aau-giraf/weekplanner/issues/542) |As a guardian I would like to have an indication that informs me that a "Brugernavn" is used when adding new user | |
|[540](https://github.com/aau-giraf/weekplanner/issues/540) |As a guardian i would like to be able to hide or collapse "Overståede uger"  |[665](https://github.com/aau-giraf/weekplanner/issues/665)   |
|[538](https://github.com/aau-giraf/weekplanner/issues/538) |'Overståede Uger' does not update correctly |[656](https://github.com/aau-giraf/weekplanner/issues/656)   |
|[535](https://github.com/aau-giraf/weekplanner/issues/535) |Buggy "Fortryd" button on activity |[585](https://github.com/aau-giraf/weekplanner/issues/585)   |
|[531](https://github.com/aau-giraf/weekplanner/issues/531) |As a guardian i would like for the text under the pictograms not be in all caps.  | |
|[529](https://github.com/aau-giraf/weekplanner/issues/529) |As a guardian I would like to be able to mark activities as completed |[602](https://github.com/aau-giraf/weekplanner/issues/602)   |
|[527](https://github.com/aau-giraf/weekplanner/issues/527) |As a guardian I want the design of disabled buttons to more clearly show that a button is disabled | |
|[514](https://github.com/aau-giraf/weekplanner/issues/514) |Changing 'Tegn for udførelse' does not move to previous screen |[582](https://github.com/aau-giraf/weekplanner/issues/582)   |
|[511](https://github.com/aau-giraf/weekplanner/issues/511) |Adding activities to a weekplan and then editing the weekplan, removes the added activities | |
|[503](https://github.com/aau-giraf/weekplanner/issues/503) |Re-navigating to activity where cancelling the activity was undone only show the 'Fortryd' button screen | |
|[502](https://github.com/aau-giraf/weekplanner/issues/502) |Update buttons to follow the design guide | |
|[499](https://github.com/aau-giraf/weekplanner/issues/499) |Refactor the code so we don't use the Observable class |[609](https://github.com/aau-giraf/weekplanner/issues/609)   |
|[498](https://github.com/aau-giraf/weekplanner/issues/498) |As a guardian I would like to be able to delete a citizen from the system | |
|[497](https://github.com/aau-giraf/weekplanner/issues/497) |As a guardian I would like to be able to delete myself from the system | |
|[495](https://github.com/aau-giraf/weekplanner/issues/495) |Pictogram text is cut off instead of being divided over two lines in portrait mode on 600x1024 screen |[559](https://github.com/aau-giraf/weekplanner/issues/559)   |
|[485](https://github.com/aau-giraf/weekplanner/issues/485) |There should be defined a errortext color in the custom colors, and this should be used for all errortext |[557](https://github.com/aau-giraf/weekplanner/issues/557)   |
|[482](https://github.com/aau-giraf/weekplanner/issues/482) |When uploading a large image to a new weekplan, the image is not uploaded properly | |
|[474](https://github.com/aau-giraf/weekplanner/issues/474) |With a lot of activities on a single weekplan, the activities sometimes jump to the bottom of the day when moved |[598](https://github.com/aau-giraf/weekplanner/issues/598)   |
|[471](https://github.com/aau-giraf/weekplanner/issues/471) |Missing error message when trying to create a citizen with a username already in use |[561](https://github.com/aau-giraf/weekplanner/issues/561)   |
|[468](https://github.com/aau-giraf/weekplanner/issues/468) |Activity timer completion sound is still emitted when you are logged out | |
|[462](https://github.com/aau-giraf/weekplanner/issues/462) |Timers on activities are deleted when copying activities | |
|[444](https://github.com/aau-giraf/weekplanner/issues/444) |Marking an activity with a timer as complete and then unmark it causes the activity to be deleted.  | |
|[441](https://github.com/aau-giraf/weekplanner/issues/441) |Make the disable buttons have 40% opacity | |
|[439](https://github.com/aau-giraf/weekplanner/issues/439) |Lines appear around completed activities in citizen mode | |
|[438](https://github.com/aau-giraf/weekplanner/issues/438) |As a developer I would want a file with the font sizes for the different screens in the weekplan |[599](https://github.com/aau-giraf/weekplanner/issues/599)   |
|[434](https://github.com/aau-giraf/weekplanner/issues/434) |As a guardian I would like a citizen to be able to view two days at a time so that they can see today and tomorrow |[566](https://github.com/aau-giraf/weekplanner/issues/566)   |
|[429](https://github.com/aau-giraf/weekplanner/issues/429) |As a guardian, I would like to know when I have written a wrong login fast |[653](https://github.com/aau-giraf/weekplanner/issues/653)   |
|[428](https://github.com/aau-giraf/weekplanner/issues/428) |As a guardian, I would like to have an error message when creating a user who already exists |[561](https://github.com/aau-giraf/weekplanner/issues/561)   |
|[425](https://github.com/aau-giraf/weekplanner/issues/425) |Periodic errors in asynchronous tests | |
|[396](https://github.com/aau-giraf/weekplanner/issues/396) |As a guardian I would like to have access to x number of pictograms in offline mode using the local database. | |
|[384](https://github.com/aau-giraf/weekplanner/issues/384) |As a developer i would like the app to be deployed to Google Play when it is merged into master | |
|[371](https://github.com/aau-giraf/weekplanner/issues/371) |As a guardian i would like to resume multiple canceled activities in the weekplan edit screen |[664](https://github.com/aau-giraf/weekplanner/issues/664)   |
|[364](https://github.com/aau-giraf/weekplanner/issues/364) |Warning on memory waste/security issue for API lvl 19 |[647](https://github.com/aau-giraf/weekplanner/issues/647)   |
|[352](https://github.com/aau-giraf/weekplanner/issues/352) |Timer is not saved when you cancel activity and then undo the cancel | |
|[327](https://github.com/aau-giraf/weekplanner/issues/327) |Artifacts | |
|[308](https://github.com/aau-giraf/weekplanner/issues/308) |Visible red line when timer has finished. |[594](https://github.com/aau-giraf/weekplanner/issues/594)| 
|[304](https://github.com/aau-giraf/weekplanner/issues/304) |The 'add new weekplan'-button is still available in edit-mode, but does nothing. |[560](https://github.com/aau-giraf/weekplanner/issues/560)   |
|[273](https://github.com/aau-giraf/weekplanner/issues/273) |As a guardian I would like to be able to delete pictograms I've uploaded so that I can remove wrongly uploaded / outdated pictograms |[606](https://github.com/aau-giraf/weekplanner/issues/606)   |
|[206](https://github.com/aau-giraf/weekplanner/issues/206) |API Exceptions are thrown everywhere where an api call was made previously when the log out button is pressed | |




### web-api  


|Number |Title |Solved by PR |
|:---------|:---------|:---------|
|[170](https://github.com/aau-giraf/web-api/issues/170) |As a developer I would like support for renaming activities locally |[174](https://github.com/aau-giraf/web-api/issues/174) |
|[168](https://github.com/aau-giraf/web-api/issues/168) |DEV server no longer works properly | |
|[167](https://github.com/aau-giraf/web-api/issues/167) |Searching pictograms should not be case sensitive |[169](https://github.com/aau-giraf/web-api/issues/169)| 
|[162](https://github.com/aau-giraf/web-api/issues/162) |As a developer I would like for pictograms to have a GirafUser indicating the creating user, so that I can make sure that only the creating user can delete pictograms. | |
|[159](https://github.com/aau-giraf/web-api/issues/159) |Images should be hashed, and saved in the ImageHash row  |[173](https://github.com/aau-giraf/web-api/issues/173)  |
|[158](https://github.com/aau-giraf/web-api/issues/158) |Error messages from English to Danish | |
|[154](https://github.com/aau-giraf/web-api/issues/154) |Fix unit and integration tests and startup problems.   |[155](https://github.com/aau-giraf/web-api/issues/155)  |
|[123](https://github.com/aau-giraf/web-api/issues/123) |Tests failing because they refer to a file not created by sample data of the database | |
|[114](https://github.com/aau-giraf/web-api/issues/114) |Creating a new activity to a weekplans date with a pictogram with blank title will result in an exception |[161](https://github.com/aau-giraf/web-api/issues/161)  |
|[112](https://github.com/aau-giraf/web-api/issues/112) |Activity timer disappears after pressing 'Fortryd' after cancelling the activity. | |
|[93](https://github.com/aau-giraf/web-api/issues/93) |As a developer I would like to be able to run the integrations tests independent on the sample-data already being in the database | |
|[91](https://github.com/aau-giraf/web-api/issues/91) |Remove redundant endpoint |[176](https://github.com/aau-giraf/web-api/issues/176)  |
|[49](https://github.com/aau-giraf/web-api/issues/49) |Remove hardcoded values from Controller | |
|[47](https://github.com/aau-giraf/web-api/issues/47) |As a developer, I would like the table `Pictograms` to not include `ImageHash`. | |
|[19](https://github.com/aau-giraf/web-api/issues/19) |Updating order of activities when reordering in the weekplan |[180](https://github.com/aau-giraf/web-api/issues/180)  |
|[5](https://github.com/aau-giraf/web-api/issues/5) |Illogical endpoints |[172](https://github.com/aau-giraf/web-api/issues/172)  |



### api_client  


|Number |Title |Solved by PR |
|:---------|:---------|:---------|
|[81](https://github.com/aau-giraf/api_client/issues/81) |Updating order of activities when reordering in the weekplan |[86](https://github.com/aau-giraf/api_client/issues/86) |
|[74](https://github.com/aau-giraf/api_client/issues/74) |As a developer I would like the pictogram model to have a the Id of the creating user |[75](https://github.com/aau-giraf/api_client/issues/75) |
|[56](https://github.com/aau-giraf/api_client/issues/56) |Refactor the code so we don't use the Observable class |[73](https://github.com/aau-giraf/api_client/issues/73) |
|[52](https://github.com/aau-giraf/api_client/issues/52) |Fundamental bug in the offline repository | |
|[3](https://github.com/aau-giraf/api_client/issues/3) |Implement updateIcon in user_api.dart | |


## Result

Based on the implemented issues, the following have been accomplished:

 - Searching is no longer case sensitive
 - Guardians can unmark completed activities
 - Citizens can reenter completed activities
 - Guardians can log out from the "Show activity" screens
 - Moving week plans has been optimized, so it no longer reloads the entire week plan
 - Added new and improved existing notifications when errors occur.
 - "Overståede uger" can be collapsed
 - Citizens can view two days at the time
 - Multiple cancelled activities can be resumed at once
 - Furthermore several bugs have been ironed out
